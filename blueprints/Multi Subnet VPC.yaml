spec_version: 2
description: A VPC with multiple subnets with an internet gateway (standardized environment for other Blueprints)

inputs:
  aws_region:
    description: "The name of the AWS Region to use"
    default: "eu-west-1"
    allowed-values: ["eu-west-1"]
outputs:
  app_subnet_a_id:
    value: '{{ .grains.EnvironmentInfrastructure.outputs.AppSubnetAID }}'
    quick: false
  app_subnet_b_id:
    value: '{{ .grains.EnvironmentInfrastructure.outputs.AppSubnetBID }}'
    quick: false
  default_security_group_id:
    value: '{{ .grains.EnvironmentInfrastructure.outputs.DefaultSecurityGroupID }}'
    quick: false

grains:
  EnvironmentInfrastructure:
    kind: cloudformation
    spec:
      source:
        store: Torque-Samples
        path: assets/cloudformation/MultiSubnetVPC.yaml
      agent:
        name: Sample-Agent
      inputs:
      - Region: '{{ .inputs.aws_region }}'
      env-vars: []
      outputs:
      - AppSubnetAID
      - AppSubnetBID
      - DefaultSecurityGroupID
      region: '{{ .inputs.aws_region }}'
